{% extends "treatment/treatment_base.html" %}
{% block content %}

<style>
    .form-label {
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: block;
    }

    .form-input, .form-select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #ccc;
        border-radius: 0.25rem;
        margin-bottom: 1rem;
    }

        .form-input:focus, .form-select:focus {
            border-color: #007bff;
            outline: none;
        }

    .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 0.25rem;
        cursor: pointer;
    }

    .btn-primary {
        background-color: #007bff;
        color: white;
    }

        .btn-primary:hover {
            background-color: #0056b3;
        }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }

        .btn-secondary:hover {
            background-color: #5a6268;
        }
</style>

<div id="newTreatmentModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg shadow-xl w-3/4 p-6">
        <h2 class="text-lg font-semibold mb-4">Add New Treatment Record</h2>
        <form id="newTreatmentForm" action={{url_for('treatment.add_treatment')}}>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label for="treatmentFor" class="form-label">Treatment For</label>
                    <select id="treatmentFor" class="form-select">
                        <option value="KDL">KDL</option>
                        <option value="Client">Client</option>
                    </select>
                </div>
                <div>
                    <label for="client_id" class="form-label">Treatment For</label>
                    <select id="client_id" class="form-select">
                        {% for client in clients %}
                        <option value="{{ client.id }}">{{ client.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="date" class="form-label">Date</label>
                    <input type="date" id="date" class="form-input">
                </div>
                <div>
                    <label for="cylinderNo" class="form-label">Cylinder No.</label>
                    <input type="number" id="cylinderNo" class="form-input">
                </div>
                <div>
                    <label for="litersAdded" class="form-label">Liters Added</label>
                    <input type="number" id="litersAdded" class="form-input">
                </div>
                <div>
                    <label for="kegsAdded" class="form-label">Kegs Added</label>
                    <input type="number" id="kegsAdded" class="form-input">
                </div>
                <div>
                    <label for="kegsRemaining" class="form-label">Kegs Remaining</label>
                    <input type="number" id="kegsRemaining" class="form-input">
                </div>
                <div>
                    <label for="strength" class="form-label">Strength %</label>
                    <input type="number" id="strength" class="form-input" value="4.5">
                </div>
            </div>
            <h3 class="text-lg font-semibold mt-4">Treatment Items</h3>
            <div class="grid grid-cols-3 gap-4 mt-2">
                <div>
                    <label for="telecomPoles" class="form-label">Telecom Poles</label>
                    <input type="number" id="telecomPoles" class="form-input">
                </div>
                <div>
                    <label for="timber" class="form-label">Timber</label>
                    <input type="number" id="timber" class="form-input">
                </div>
                <div>
                    <label for="rafters" class="form-label">Rafters</label>
                    <input type="number" id="rafters" class="form-input">
                </div>
                <div>
                <label for="poles_length" class="form-label">pole lenth</label>
                <select name="poles_length" id="poles_length">
                    <option value="7m">7m</option>
                    <option value="8m">8m</option>
                    <option value="9m">9m</option>
                    <option value="10m">10m</option>
                    <option value="11m">11m</option>
                    <option value="12m">12m</option>
                    <option value="14m">14m</option>
                    <option value="16m">16m</option>

                </select>
                <!-- Repeat for other item fields -->
            </div>
            <button type="submit" class="btn btn-primary mt-4">Save</button>
            <button type="button" class="btn btn-secondary mt-4" onclick="closeModal()">Cancel</button>
        </form>
    </div>
</div>

<script>
    function openNewTreatmentModal() {
        document.getElementById("newTreatmentModal").classList.remove("hidden");
    }

    function closeModal() {
        document.getElementById("newTreatmentModal").classList.add("hidden");
    }

    function refreshData() {
        // Logic to fetch and refresh data in the treatment table
        console.log("Refreshing data...");
    }

    document.getElementById("newTreatmentForm").addEventListener("submit", function (e) {
        e.preventDefault();
        // Logic to save form data
        closeModal();
        refreshData();
    });

</script>
{% endblock %}
