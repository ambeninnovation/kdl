<script>
    document.addEventListener('DOMContentLoaded', function() {
        const deliverForSelect = document.getElementById('deliver_for');
        const clientField = document.getElementById('client_id');
        const customerField = document.getElementById('customers_id');
    
        if (!deliverForSelect || !clientField || !customerField) {
            console.error("Missing elements: Check if 'deliver_for', 'client_id', or 'customers_id' exists.");
            return;
        }
    
        const clientDiv = clientField.closest('.form-group') || clientField.parentElement;
        const customerDiv = customerField.closest('.form-group') || customerField.parentElement;
    
        function updateVisibility() {
            const selectedValue = deliverForSelect.value;
            console.log(`Selected: ${selectedValue}`); // Debugging log
    
            if (selectedValue === 'customer') {
                clientDiv.style.display = 'none';
                customerDiv.style.display = 'block';
            } else if (selectedValue === 'client') {
                clientDiv.style.display = 'block';
                customerDiv.style.display = 'none';
            } else {
                clientDiv.style.display = 'block';
                customerDiv.style.display = 'block';
            }
        }
    
        // Initial visibility
        updateVisibility();
    
        // Add event listener
        deliverForSelect.addEventListener('change', updateVisibility);
    });
</script>
    